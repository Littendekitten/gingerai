<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Train GingerAI</title>
<style>
body { font-family: Arial, sans-serif; background: #f0f0f0; color: #333; }
.container { max-width: 800px; margin: 20px auto; background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
h1 { text-align: center; }
textarea { width: 100%; height: 100px; margin-bottom: 10px; padding: 10px; font-size: 16px; }
button { padding: 10px 20px; font-size: 16px; cursor: pointer; border-radius: 5px; border: none; background: #4CAF50; color: white; }
.output { margin-top: 20px; padding: 10px; background: #e0e0e0; border-radius: 5px; min-height: 50px; white-space: pre-wrap; }
</style>
</head>
<body>

<div class="container">
<h1>Train GingerAI</h1>
<textarea id="userInput" placeholder="Type a message..."></textarea>
<button id="sendBtn">Send</button>
<div class="output" id="aiOutput">GingerAI ready...</div>
</div>

<script>
// ----------------------------
// TRIGGER DATABASE (voorbeeld, uitbreidbaar)
// ----------------------------
const triggers = [
    {input: /hello|hi|hey/i, response: "Hello there! How can I help you today?"},
    {input: /hallo|hoi/i, response: "Hoi! Hoe gaat het?"},
    {input: /weather|weer/i, response: "I can't check live weather yet, but it's always sunny in code!"},
    {input: /name/i, response: "I'm GingerAI, your friendly assistant."},
    {input: /love|liefde/i, response: "Love is a complex thing! Make sure to follow your heart."},
    {input: /game|games/i, response: "I love games! What's your favorite game?"},
    {input: /movie|film/i, response: "I can't watch movies yet, but I know many titles. Ask me about one!"}
];

// ----------------------------
// LANGUAGE DETECTION
// ----------------------------
function detectLanguage(text){
    const nlWords = ["hallo", "hoi", "dank", "alsjeblieft", "liefde", "weer"];
    let nlCount = nlWords.filter(w => text.toLowerCase().includes(w)).length;
    return nlCount > 0 ? "nl" : "en";
}

// ----------------------------
// API HOOK STRUCTURE (voorbeeld, kan uitgebreid worden)
// ----------------------------
async function fetchWikipedia(query){
    try {
        const url = `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(query)}`;
        const res = await fetch(url);
        if(!res.ok) return null;
        const data = await res.json();
        return data.extract || null;
    } catch(e) { return null; }
}

async function fetchWeather(city){
    // Placeholder: geen echte API key, structuur alleen
    return `Weather for ${city} is sunny (dummy data).`;
}

// ----------------------------
// SMART RESPONSE GENERATION
// ----------------------------
async function generateResponse(message){
    // Eerst triggers checken
    for(const t of triggers){
        if(t.input.test(message)){
            return t.response;
        }
    }

    // Check voor Wikipedia queries
    if(/who|what|where|wie|wat|waar/i.test(message)){
        const lang = detectLanguage(message);
        const query = message.replace(/(who|what|where|wie|wat|waar)/gi, "").trim();
        if(query.length > 0){
            const wikiResult = await fetchWikipedia(query);
            if(wikiResult) return wikiResult;
        }
    }

    // Check voor weer queries
    if(/weather|weer/i.test(message)){
        const cityMatch = message.match(/in (\w+)/i);
        const city = cityMatch ? cityMatch[1] : "your city";
        return await fetchWeather(city);
    }

    // Fallback met taal-specifiek antwoord
    return detectLanguage(message) === "nl" 
        ? "Sorry, ik weet daar niet echt iets op te zeggen." 
        : "Sorry, I don't know how to respond to that.";
}

// ----------------------------
// EXPOSE GINGERAI OBJECT
// ----------------------------
window.GingerAI = {
    ask: function(message){
        return new Promise(async (resolve) => {
            // kleine vertraging voor realisme
            const response = await generateResponse(message);
            resolve(response);
        });
    }
};

// ----------------------------
// UI HANDLER (optioneel, kan index.html apart doen)
// ----------------------------
const sendBtn = document.getElementById("sendBtn");
const userInput = document.getElementById("userInput");
const aiOutput = document.getElementById("aiOutput");

sendBtn.addEventListener("click", async () => {
    const msg = userInput.value.trim();
    if(!msg) return;
    aiOutput.textContent = "GingerAI is thinking...";
    const response = await window.GingerAI.ask(msg);
    aiOutput.textContent = response;
});

// Enter key support
userInput.addEventListener("keydown", async (e) => {
    if(e.key === "Enter" && !e.shiftKey){
        e.preventDefault();
        sendBtn.click();
    }
});
</script>
</body>
</html>
